/**
 * net.js 0.1 Copyright (c) 2013, Matt King (mking@mking.me)
 * Available via the MIT license.
 * see: https://github.com/mattking17/net.js for details
 */

/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,t){typeof define=="function"&&define.amd?define("net",t):e.net=t()})(this,function(){var e,t,n;return function(r){function i(e,t){return w.call(e,t)}function s(e,t){var n,r,i,s,o,u,a,f,l,c,h=t&&t.split("/"),p=y.map,d=p&&p["*"]||{};if(e&&e.charAt(0)===".")if(t){h=h.slice(0,h.length-1),e=h.concat(e.split("/"));for(f=0;f<e.length;f+=1){c=e[f];if(c===".")e.splice(f,1),f-=1;else if(c===".."){if(f===1&&(e[2]===".."||e[0]===".."))break;f>0&&(e.splice(f-1,2),f-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((h||d)&&p){n=e.split("/");for(f=n.length;f>0;f-=1){r=n.slice(0,f).join("/");if(h)for(l=h.length;l>0;l-=1){i=p[h.slice(0,l).join("/")];if(i){i=i[r];if(i){s=i,o=f;break}}}if(s)break;!u&&d&&d[r]&&(u=d[r],a=f)}!s&&u&&(s=u,o=a),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function o(e,t){return function(){return p.apply(r,E.call(arguments,0).concat([e,t]))}}function u(e){return function(t){return s(t,e)}}function a(e){return function(t){m[e]=t}}function f(e){if(i(g,e)){var t=g[e];delete g[e],b[e]=!0,h.apply(r,t)}if(!i(m,e)&&!i(b,e))throw new Error("No "+e);return m[e]}function l(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function c(e){return function(){return y&&y.config&&y.config[e]||{}}}var h,p,d,v,m={},g={},y={},b={},w=Object.prototype.hasOwnProperty,E=[].slice;d=function(e,t){var n,r=l(e),i=r[0];return e=r[1],i&&(i=s(i,t),n=f(i)),i?n&&n.normalize?e=n.normalize(e,u(t)):e=s(e,t):(e=s(e,t),r=l(e),i=r[0],e=r[1],i&&(n=f(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},v={require:function(e){return o(e)},exports:function(e){var t=m[e];return typeof t!="undefined"?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:c(e)}}},h=function(e,t,n,s){var u,l,c,h,p,y=[],w;s=s||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(p=0;p<t.length;p+=1){h=d(t[p],s),l=h.f;if(l==="require")y[p]=v.require(e);else if(l==="exports")y[p]=v.exports(e),w=!0;else if(l==="module")u=y[p]=v.module(e);else if(i(m,l)||i(g,l)||i(b,l))y[p]=f(l);else{if(!h.p)throw new Error(e+" missing "+l);h.p.load(h.n,o(s,!0),a(l),{}),y[p]=m[l]}}c=n.apply(m[e],y);if(e)if(u&&u.exports!==r&&u.exports!==m[e])m[e]=u.exports;else if(c!==r||!w)m[e]=c}else e&&(m[e]=n)},e=t=p=function(e,t,n,i,s){return typeof e=="string"?v[e]?v[e](t):f(d(e,t).f):(e.splice||(y=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},typeof n=="function"&&(n=i,i=s),i?h(r,e,t,n):setTimeout(function(){h(r,e,t,n)},4),p)},p.config=function(e){return y=e,y.deps&&p(y.deps,y.callback),p},n=function(e,t,n){t.splice||(n=t,t=[]),!i(m,e)&&!i(g,e)&&(g[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("../build/almond.js",function(){}),n("promise",[],function(){function e(){this.promises={success:[],fail:[]}}var t={SUCCESS:"success",FAIL:"fail"};return e.prototype.chain=function(){return this.chained=!0,this},e.prototype.then=function(e,t){return e&&this.promises.success.push(e),t&&this.promises.fail.push(t),this},e.prototype.run=function(e,t){var n=t,r=this.promises[e];while(r.length){var i=r.shift(),s=i(n);this.chained&&(n=s)}return this},e.prototype.succeed=function(e){return this.run(t.SUCCESS,e)},e.prototype.fail=function(e){return this.run(t.FAIL,e)},e}),n("net/ajax",["promise"],function(e){function t(){}function n(n){var r=n.success,i=n.error,s=new e;(r||i)&&s.then(r||t,i||t);var o=new XMLHttpRequest;o.open(n.method,n.url,!0),n.headers=n.headers||{};for(var u in n.headers)o.setRequestHeader(u,n.headers[u]);return o.withCredentials=n.withCredentials,o.onreadystatechange=function(){if(o.readyState!==4)return;if(o.status in f&&!(o.status in a))throw s.fail(o),new Error("Error issuing "+n.method+" to "+n.url+" ("+o.status+" "+f[o.status]+")");n.process?n.process.call(n.process,o,s):s.succeed(o)},o.readyState===4?!1:(o.send(n.data||null),s)}function r(e){return e.method=u.GET,n(e)}function i(e){return e.method=u.POST,n(e)}function s(e){return e.method=u.PUT,n(e)}function o(e){return e.method=u.DELETE,n(e)}window.XMLHttpRequest=window.XMLHttpRequest||function(){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];for(var t=0;t<e.length;t++)try{return new ActiveXObject(e[t]),function(){return new ActiveXObject(e[t])}}catch(n){}throw new Error("This browser does not support XMLHttpRequest.")}();var u={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE"},a={200:"OK",201:"Created",202:"Accepted",204:"No Content"},f={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",409:"Conflict",411:"Method Not Allowed",500:"Internal Server Error",501:"Unsupported Method"},l={get:r,post:i,put:s,"delete":o,request:n};return l}),n("net/json",["net/ajax"],function(e){function t(e){e=e||{},e.headers=e.headers||{},e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.headers.Accept=e.headers.Accept||"application/json",e.process=n,e.data&&(e.data=JSON.stringify(e.data))}function n(e,t){var n;try{n=JSON.parse(e.responseText||"{}")}catch(r){throw t.fail(e),new Error("Error parsing JSON: "+r)}return t.succeed(n)}function r(n){return t(n),e.get(n)}function i(n){return t(n),e.post(n)}function s(n){return t(n),e.put(n)}function o(n){return t(n),e.delete(n)}var u={get:r,post:i,put:s,"delete":o};return u}),n("net/form",["net/ajax"],function(e){function t(e){var t=[];for(var n in e)t.push([encodeURIComponent(n),encodeURIComponent(e[n])].join("="));return t.join("&")}function n(e){e=e||{},e.headers=e.headers||{},e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data&&(e.data=t(e.data))}function r(t){return n(t),e.post(t)}function i(t){return n(t),e.put(t)}var s={post:r,put:i};return s}),n("net",["net/ajax","net/json","net/form"],function(e,t,n){var r={ajax:e,json:t,form:n};return r}),t("net")});